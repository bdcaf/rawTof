---
title: "Direct use of rhdf5 commands"
author: "Clemens Ager"
date: "`r Sys.Date()`"
output: 
  rmarkdown:::html_vignette
vignette: >
  %\VignetteIndexEntry{Do it in plain rhdf5}
  %\VignetteKeyword{example}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

#  show how to get the data without using this package

```{r}
tof_file <- system.file("extdata","breath.h5", package="tofExampleData")
```

The package requires [rhdf5](https://bioconductor.org/packages/release/bioc/html/rhdf5.html).
```{r library}
library(rhdf5)
```

## see the content

```{r}
(content <- h5ls(tof_file) )
```

## get the sum spectrum

```{r}
sumspec <- h5read(tof_file, "/FullSpectra/SumSpectrum")
plot(sumspec, type="l")
```

## peak information

```{r}
(peak_table <- h5read(tof_file, "/PeakData/PeakTable"))
(peak_data <- h5read(tof_file, "/PeakData/PeakData"))
```


## full spectrum

### attributes 

```{r}
(full_attrib <- h5readAttributes(tof_file, "/FullSpectra"))
h5readAttributes(tof_file, "/RawData/HPTDC")
h5readAttributes(tof_file, "/TimingData")
```

### get dimension info

```{r}
h5f <- H5Fopen(tof_file)
extents <- dim(h5f$`FullSpectra/TofData`)
aSpec <- h5f$`FullSpectra/TofData`[,1,2,3]
plot(aSpec,type="l")
```

